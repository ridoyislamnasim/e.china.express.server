model Order {
  id            Int             @id @default(autoincrement())
  totalPrice    Decimal         @db.Decimal(12, 2)
  createdAt     DateTime        @default(now())
  updatedAt     DateTime
  cartId        Int?
  currency      String          @default("Dollar")
  orderNumber   String          @unique
  paymentStatus PaymentStatus   @default(UNPAID)
  remarks       String?
  totalWeight   Decimal         @db.Decimal(10, 3)
  userId        Int
  status        OrderStatus     @default(PENDING)
  Cart          Cart?           @relation(fields: [cartId], references: [id])
  // User          User            @relation(fields: [userId], references: [id])
  OrderItem     OrderItem[]
  OrderShipping OrderShipping[]
}

model OrderItem {
  id               Int        @id @default(autoincrement())
  orderId          Int
  titleTrans       String?
  productFor       ProductFor
  product1688Id    String?
  productLocalId   Int?
  productAlibabaId String?
  vendorId         Int?
  quantity         Int
  unitPrice        Decimal    @db.Decimal(12, 2)
  totalPrice       Decimal    @db.Decimal(12, 2)
  totalWeight      Decimal    @db.Decimal(10, 3)
  variants         Json
  createdAt        DateTime   @default(now())
  Order            Order      @relation(fields: [orderId], references: [id], onDelete: Cascade)
}

model OrderShipping {
  id                                               Int                 @id @default(autoincrement())
  orderId                                          Int
  shippingMethodId                                 Int?
  fromCountryId                                    Int?
  toCountryId                                      Int?
  totalQuantity                                    Int
  approxWeight                                     Decimal             @db.Decimal(10, 3)
  totalCost                                        Decimal             @db.Decimal(12, 2)
  customDuty                                       Decimal             @db.Decimal(12, 2)
  vat                                              Decimal             @db.Decimal(6, 2)
  handlingFee                                      Decimal             @db.Decimal(12, 2)
  packagingFee                                     Decimal             @db.Decimal(12, 2)
  discount                                         Decimal             @db.Decimal(12, 2)
  finalPayable                                     Decimal             @db.Decimal(12, 2)
  estDeliveryDays                                  Int?
  trackingNumber                                   String?
  trackingURL                                      String?
  shippingStatus                                   ShippingStatus      @default(PENDING)
  createdAt                                        DateTime            @default(now())
  updatedAt                                        DateTime
  countries_OrderShipping_fromCountryIdTocountries Country?            @relation("OrderShipping_fromCountryIdTocountries", fields: [fromCountryId], references: [id])
  Order                                            Order               @relation(fields: [orderId], references: [id], onDelete: Cascade)
  // RateShippingMethod                               RateShippingMethod? @relation(fields: [shippingMethodId], references: [id])
  countries_OrderShipping_toCountryIdTocountries   Country?            @relation("OrderShipping_toCountryIdTocountries", fields: [toCountryId], references: [id])
}

model ProductShipping {
  id                                                 Int                 @id @default(autoincrement())
  cartId                                             Int
  cartProductId                                      Int
  rateId                                             Int?
  fromCountryId                                      Int?
  toCountryId                                        Int?
  totalQuantity                                      Int                 @default(0)
  approxWeight                                       Decimal             @default(0) @db.Decimal(10, 3)
  weightRange                                        Decimal             @default(0) @db.Decimal(10, 3)
  shippingMethodId                                   Int?
  totalCost                                          Decimal             @default(0) @db.Decimal(12, 2)
  orderEnabled                                       Boolean             @default(false)
  customDuty                                         Decimal             @default(0) @db.Decimal(12, 2)
  vat                                                Decimal             @default(0) @db.Decimal(6, 2)
  handlingFee                                        Decimal             @default(0) @db.Decimal(12, 2)
  packagingFee                                       Decimal             @default(0) @db.Decimal(12, 2)
  discount                                           Decimal             @default(0) @db.Decimal(12, 2)
  finalPayable                                       Decimal             @default(0) @db.Decimal(12, 2)
  estDeliveryDays                                    Int?
  actualDeliveryDate                                 DateTime?
  trackingNumber                                     String?
  trackingURL                                        String?
  warehouseLocation                                  String?
  shippingStatus                                     String              @default("pending")
  remarks                                            String?
  createdAt                                          DateTime            @default(now())
  updatedAt                                          DateTime
  Cart                                               Cart                @relation(fields: [cartId], references: [id], onDelete: Cascade)
  CartProduct                                        CartProduct         @relation(fields: [cartProductId], references: [id], onDelete: Cascade)
  countries_ProductShipping_fromCountryIdTocountries Country?            @relation("ProductShipping_fromCountryIdTocountries", fields: [fromCountryId], references: [id])
  // Rate                                               Rate?               @relation(fields: [rateId], references: [id])
  // RateShippingMethod                                 RateShippingMethod? @relation(fields: [shippingMethodId], references: [id], onDelete: Cascade)
  countries_ProductShipping_toCountryIdTocountries   Country?            @relation("ProductShipping_toCountryIdTocountries", fields: [toCountryId], references: [id]) 
  // userId                                             Int?
  // User                                               User?               @relation(fields: [userId], references: [id])
}
